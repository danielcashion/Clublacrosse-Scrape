/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;
/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.7.12 : Database - public_data
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`public_data` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `public_data`;

/*View structure for view v_tm_game_data_normalized */

/*!50001 DROP TABLE IF EXISTS `v_tm_game_data_normalized` */;
/*!50001 DROP VIEW IF EXISTS `v_tm_game_data_normalized` */;

/*!50001 CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW `v_tm_game_data_normalized` AS select `T1`.`IDTournament` AS `IDTournament`,`T1`.`tournament_name` AS `tournament_name`,`T1`.`tournament_division_name` AS `tournament_division_name`,`T1`.`location_name` AS `location_name`,`T1`.`game_date` AS `game_date`,`T1`.`game_time` AS `game_time`,`T1`.`game_dt` AS `game_dt`,`T1`.`game_tm` AS `game_tm`,`T1`.`team_name` AS `team_name`,`T1`.`team_score` AS `team_score`,`T1`.`opponent_name` AS `opponent_name`,`T1`.`opponent_score` AS `opponent_score`,`T1`.`goal_diff` AS `goal_diff`,`T1`.`team1_outcome` AS `team1_outcome` from (select `G`.`IDTournament` AS `IDTournament`,`G`.`tournament_name` AS `tournament_name`,`G`.`tournament_division_name` AS `tournament_division_name`,`G`.`location_name` AS `location_name`,`G`.`game_date` AS `game_date`,`G`.`game_time` AS `game_time`,str_to_date(`G`.`game_date`,'%W, %M %d, %Y') AS `game_dt`,str_to_date(`G`.`game_time`,'%h:%i %p') AS `game_tm`,(case when (locate('] ',`G`.`home_team_name`) > 0) then right(`G`.`home_team_name`,(length(`G`.`home_team_name`) - 4)) else `G`.`home_team_name` end) AS `team_name`,`G`.`away_score` AS `team_score`,(case when (locate('] ',`G`.`away_team_name`) > 0) then right(`G`.`away_team_name`,(length(`G`.`away_team_name`) - 4)) else `G`.`away_team_name` end) AS `opponent_name`,`G`.`home_score` AS `opponent_score`,(`G`.`away_score` - `G`.`home_score`) AS `goal_diff`,(case when (`G`.`away_score` > `G`.`home_score`) then 'W' when (`G`.`away_score` = `G`.`home_score`) then 'T' when (`G`.`away_score` < `G`.`home_score`) then 'L' else NULL end) AS `team1_outcome` from `public_data`.`tourneymachine_game_data_staging` `G` union select `G`.`IDTournament` AS `IDTournament`,`G`.`tournament_name` AS `tournament_name`,`G`.`tournament_division_name` AS `tournament_division_name`,`G`.`location_name` AS `location_name`,`G`.`game_date` AS `game_date`,`G`.`game_time` AS `game_time`,str_to_date(`G`.`game_date`,'%W, %M %d, %Y') AS `game_dt`,str_to_date(`G`.`game_time`,'%h:%i %p') AS `game_tm`,(case when (locate('] ',`G`.`away_team_name`) > 0) then right(`G`.`away_team_name`,(length(`G`.`away_team_name`) - 4)) else `G`.`away_team_name` end) AS `team_name`,`G`.`home_score` AS `team_score`,(case when (locate('] ',`G`.`home_team_name`) > 0) then right(`G`.`home_team_name`,(length(`G`.`home_team_name`) - 4)) else `G`.`home_team_name` end) AS `opponent_name`,`G`.`away_score` AS `opponent_score`,(`G`.`home_score` - `G`.`away_score`) AS `goal_diff`,(case when (`G`.`home_score` > `G`.`away_score`) then 'W' when (`G`.`home_score` = `G`.`away_score`) then 'T' when (`G`.`home_score` < `G`.`away_score`) then 'L' else NULL end) AS `team1_outcome` from `public_data`.`tourneymachine_game_data_staging` `G`) `T1` where (1 = 1) order by `T1`.`game_date`,`T1`.`game_time`,`T1`.`location_name` */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
